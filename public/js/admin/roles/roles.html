<ng-include src="'js/nav/navbar_top.html'"></ng-include>

<div class="container">

    <div class="col-sm-10 col-sm-offset-1">
        <hr/>
        <ul class="nav nav-tabs">
            <li><a href="users">Users</a></li>
            <li class="active"><a href="roles">Roles</a></li>
            <li><a href="permissions">Permissions</a></li>
            <li><a href="schools">Schools</a></li>
            <li><a href="groups">Groups</a></li>
        </ul>

        <div>
            <button class="btn btn-primary" ng-click="roles.addRole()">Add New Role</button>
        </div>

        <div class="table-repsonsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Permissions</th>
                    </tr>
                </thead>

                <tbody>
                    <tr ng-repeat="role in roles.data track by $index">
                        <td>{{ role.display_name }}</td>
                        <td>{{ role.description }}</td>
                        <td>
                            <button ng-if="role.perms.length < 1"
                                    ng-click="roles.managePermissions(role)"
                                    class="btn btn-xs btn-primary">
                                    Assign Permission
                            </button>
                            <button ng-repeat="perm in role.perms track by $index"
                                    ng-click="roles.managePermissions(role)"
                                    class="btn btn-xs btn-success" >
                                    {{ perm.display_name }}
                            </button>
                        </td>
                        <td><button class="btn btn-xs btn-primary" ng-click="roles.editRole(role)">Edit</button></td>
                        <td><button class="btn btn-xs btn-danger" ng-click="roles.deleteRole(role, $index)">Delete</button></td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
</div>
